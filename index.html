<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Dashboard - Cadastro de Clientes</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      background-color: #2c2c2c;
      color: #ffffff;
    }
    .sidebar {
      height: 100vh;
      background: #000000;
      padding-top: 20px;
      position: fixed;
      width: 230px;
      color: #ffffff;
    }
    .sidebar a {
      color: #ffffff;
      text-decoration: none;
      display: flex;
      align-items: center;
      padding: 14px 20px;
      transition: background 0.3s;
    }
    .sidebar a:hover,
    .sidebar a.active {
      background: #2c2c2c;
    }
    .sidebar i {
      margin-right: 10px;
    }
    .content {
      margin-left: 230px;
      padding: 20px;
    }
    .card {
      border: none;
      border-radius: 12px;
      background-color: #000000;
      color: #ffffff;
      box-shadow: 0 4px 8px rgba(0,0,0,0.5);
      transition: transform 0.3s ease;
    }
    .card:hover {
      transform: scale(1.02);
    }
    .card h5 {
      margin-bottom: 0;
      color: #e67e22;
    }
    .card i {
      font-size: 2rem;
      color: #e67e22;
      margin-bottom: 10px;
    }
    h2, h5 {
      color: #e67e22;
    }
    @media (max-width: 768px) {
      .sidebar {
        width: 100%;
        height: auto;
        position: relative;
      }
      .content {
        margin-left: 0;
      }
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <h3 class="text-center mb-4">Alinha FÃ¡cil ðŸš—ðŸ”§</h3>
    <a href="index.html" class="active"><i class="bi bi-house"></i> InÃ­cio</a>
    <a href="listar_clientes.php"><i class="bi bi-people"></i> Clientes</a>
    <a href="listar_produtos.php"><i class="bi bi-tools"></i> ServiÃ§os e Produtos</a>
    <a href="cadastrar.php"><i class="bi bi-person-plus"></i> Novo Cliente</a>
  </div>

  <div class="content">
    <h2 class="mb-4">Controle de ServiÃ§os</h2>

    <div class="row g-3 mb-4">
      <div class="col-md-4">
        <div class="card p-3 text-center">
          <i class="bi bi-people-fill"></i>
          <h5>Total de Clientes</h5>
          <h3 id="total-clientes">...</h3>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card p-3 text-center">
          <i class="bi bi-speedometer2"></i>
          <h5>Alinhamentos Hoje</h5>
          <h3 id="alinhamentos-hoje">...</h3>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card p-3 text-center">
          <i class="bi bi-car-front-fill"></i>
          <h5>Ãšltimo Carro</h5>
          <h3 id="ultimo-carro">...</h3>
          <p id="placa-carro">...</p>
        </div>
      </div>
    </div>

    <div class="card p-4">
      <h5 class="mb-3">Clientes nos Ãšltimos 7 Dias</h5>
      <canvas id="cadastroChart" height="120"></canvas>
    </div>
  </div>

  <script>
    const ctx = document.getElementById('cadastroChart').getContext('2d');
    const cadastroChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'SÃ¡b', 'Dom'],
        datasets: [{
          label: 'Cadastros',
          data: [3, 5, 2, 8, 6, 4, 7],
          backgroundColor: 'rgba(230, 126, 34, 0.2)',
          borderColor: 'rgba(230, 126, 34, 1)',
          borderWidth: 2,
          fill: true,
          tension: 0.4
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false }
        },
        scales: {
          x: {
            ticks: { color: '#ffffff' },
            grid: { color: 'rgba(255,255,255,0.1)' }
          },
          y: {
            ticks: { color: '#ffffff' },
            grid: { color: 'rgba(255,255,255,0.1)' }
          }
        }
      }
    });

    // Carregar dados do dashboard dinamicamente
    fetch('dados_dashboard.php')
      .then(response => response.json())
      .then(data => {
        document.getElementById('total-clientes').textContent = data.totalClientes;
        document.getElementById('alinhamentos-hoje').textContent = data.alinhamentosHoje;
        document.getElementById('ultimo-carro').textContent = data.ultimoCarro?.seguradora || 'â€”';
        document.getElementById('placa-carro').textContent = data.ultimoCarro?.veiculo || 'â€”';
      })
      .catch(error => console.error('Erro ao carregar dados do dashboard:', error));
  </script>
</body>
</html>
